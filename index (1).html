<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360° Property Tour</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; }
        #panorama-viewer { /* Pannellum handles internal sizing */ }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
</head>
<body class="bg-black font-sans antialiased flex flex-col min-h-screen">

    <div class="container mx-auto p-4 flex flex-col flex-grow">
        <header class="bg-gray-900 text-white px-5 py-2.5 rounded-lg shadow-lg mb-6 flex items-center justify-center">
           <h1 class="text-sm font-bold text-center">ทดสอบเวอร์ชันใหม่</h1>
        </header>

        <nav class="flex flex-wrap justify-center gap-4 mb-6">
            <button id="btn-livdin" class="px-5 py-2.5 bg-gray-700 text-white text-sm font-semibold rounded-full shadow-md hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Living & Dining
            </button>
            <button id="btn-msbed" class="px-5 py-2.5 bg-gray-700 text-white text-sm font-semibold rounded-full shadow-md hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Master Bedroom
            </button>
            <button id="btn-walkin" class="px-5 py-2.5 bg-gray-700 text-white text-sm font-semibold rounded-full shadow-md hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Master Bathroom & Walk-in
            </button>
            <button id="btn-bedroom2" class="px-5 py-2.5 bg-gray-700 text-white text-sm font-semibold rounded-full shadow-md hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Bedroom 2
            </button>
            
            <button id="btn-bedroom3" class="px-5 py-2.5 bg-gray-700 text-white text-sm font-semibold rounded-full shadow-md hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Bedroom 3 </button>
            <button id="btn-bedroom4" class="px-5 py-2.5 bg-gray-700 text-white text-sm font-semibold rounded-full shadow-md hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Bedroom 4
            </button>
            <button id="btn-kitchen" class="px-5 py-2.5 bg-gray-700 text-white text-sm font-semibold rounded-full shadow-md hover:bg-gray-600 transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50">
                Kitchen
            </button>
        </nav>

        <div id="panorama-viewer" class="flex-grow bg-gray-200 rounded-lg overflow-hidden shadow-xl min-h-[70vh]"></div>

        <footer class="mt-6 text-center text-gray-400 text-sm">
            Powered by Pannellum & Tailwind CSS
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>

    <script>
        const panoramas = {
            'livdin': {
                url: "https://i.postimg.cc/bqLDXqPQ/Living-VR-copy-done-1.jpg",
                title: "Living & Dining"
            },
            'msbed': {
                url: "https://i.postimg.cc/MxxSBVVp/MSB-done.jpg",
                title: "Master Bedroom"
            },
            'walkin': {
                url: "https://i.postimg.cc/k5Ps0SLv/18-0036-4-BR-VR-08-ms-bath-20250901-copy-done.jpg",
                title: "Master Bathroom & Walk In Closet"
            },
            'bedroom2': {
                url: "https://i.postimg.cc/N0htZNgC/x01-jpg-done.jpg",
                title: "Bedroom 2"
            },
            
            // ======= START CORRECTION HERE =======
            'bedroom3': {
                url: "https://i.postimg.cc/cx0PQGRN/x02-RGB-color.jpg",
                title: "Bedroom 3" // ✅ CORRECTED TITLE
            },
            // ======= END CORRECTION HERE =======
            
            'bedroom4': {
                url: "https://i.postimg.cc/cx0PQGRN/x02-RGB-color.jpg",
                title: "Bedroom 4"
            },
            'kitchen': {
                url: "https://i.postimg.cc/cx0PQGRN/x02-RGB-color.jpg",
                title: "Kitchen"
            }
        };

        let currentViewer = null;

        function loadPanorama(key) {
            const panoramaContainer = document.getElementById('panorama-viewer');
            if (currentViewer) {
                currentViewer.destroy();
                currentViewer = null; 
                while (panoramaContainer.firstChild) {
                    panoramaContainer.removeChild(panoramaContainer.firstChild);
                }
            }
            const selectedPanorama = panoramas[key];
            if (selectedPanorama) {
                currentViewer = pannellum.viewer('panorama-viewer', {
                    "type": "equirectangular",
                    "panorama": selectedPanorama.url,
                    "autoLoad": true,
                    "autoRotate": -2,
                    "title": selectedPanorama.title,
                    "author": "DWP.",
                    "hotSpots": []
                });
            } else {
                console.error("Error: Panorama data not found for key:", key);
                panoramaContainer.innerHTML = `<div class="flex items-center justify-center h-full text-red-600 text-xl font-semibold"><p>Oops! Could not load the panorama for "${key}".</p></div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const btnLivDin = document.getElementById('btn-livdin');
            const btnMsBed = document.getElementById('btn-msbed');
            const btnWalkin = document.getElementById('btn-walkin');
            const btnBedroom2 = document.getElementById('btn-bedroom2');
            const btnBedroom3 = document.getElementById('btn-bedroom3');
            const btnBedroom4 = document.getElementById('btn-bedroom4');
            const btnKitchen = document.getElementById('btn-kitchen');

            btnLivDin.addEventListener('click', () => loadPanorama('livdin'));
            btnMsBed.addEventListener('click', () => loadPanorama('msbed'));
            btnWalkin.addEventListener('click', () => loadPanorama('walkin'));
            btnBedroom2.addEventListener('click', () => loadPanorama('bedroom2'));
            btnBedroom3.addEventListener('click', () => loadPanorama('bedroom3'));
            btnBedroom4.addEventListener('click', () => loadPanorama('bedroom4'));
            btnKitchen.addEventListener('click', () => loadPanorama('kitchen'));

            loadPanorama('livdin');
        });
    </script>
</body>
</html>

